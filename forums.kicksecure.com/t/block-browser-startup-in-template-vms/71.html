<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Block browser startup in template vms - Development - Kicksecure Forums</title>
    <meta name="description" content="Can this be done to firefox as well? Just firefox and chromium I have in mind. 
Ideally I think this should be implemented upstream by qubes, but they don’t modify DomU applications, sometimes only add some patches to &amp;hellip;">
    <meta name="generator" content="Discourse 2.8.9 - https://github.com/discourse/discourse version 1503ec07c57898a507395552b765b6808b4e1db9">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/0db9935a1fdd7302cae516aaa752af0de307d388_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/a630bee107b3968e092ffc2c4429ddad46791578_2_180x180.png">
<meta name="theme-color" content="#eef4f7">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="71.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.kicksecure.com","potentialAction":{"@type":"SearchAction","target":"https://forums.kicksecure.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Kicksecure Forums Search">

      <link href="../../stylesheets/desktop_6f0a16f96709d7742cf2c70dd70c39bc185f99be.css_%3b%20filename_%3dUTF-8%27%27desktop_6f0a16f96709d7742cf2c70dd70c39bc185f99be61cf.css?__ws=forums.kicksecure.com" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="../../stylesheets/desktop_theme_2_471eb897b8e0d2c42f132ded46c3875ec79f02eb.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_2_471eb897b8e0d2c42f132ded46c3875ec79f02eb61cf.css?__ws=forums.kicksecure.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2" data-theme-name="header"/>
<link href="../../stylesheets/desktop_theme_1_230c7c6fb52b1dcecd39b8bcaaa9b8572dee61a4.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_1_230c7c6fb52b1dcecd39b8bcaaa9b8572dee61a461cf.css?__ws=forums.kicksecure.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="1" data-theme-name="default"/>
    <center>
[<a href="../../../external.html?link=https://www.kicksecure.com/">HOME</a>]
[<a href="../../../external.html?link=https://www.kicksecure.com/wiki/Download">DOWNLOAD</a>]
[<a href="../../../external.html?link=https://www.kicksecure.com/wiki/Documentation">DOCS</a>]
[<a href="../../c/news/5.html">NEWS</a>]
[<a href="../../../external.html?link=https://www.kicksecure.com/wiki/Support">SUPPORT</a>]
[<a href="../../../external.html?link=https://www.kicksecure.com/wiki/Forum_Best_Practices">TIPS</a>]
[<a href="../../../external.html?link=https://www.kicksecure.com/wiki/Reporting_Bugs#Issue_Tracker">ISSUES</a>]
[<a href="../../../external.html?link=https://www.kicksecure.com/wiki/Contribute">CONTRIBUTE</a>]
[<a href="../../../external.html?link=https://www.kicksecure.com/wiki/Donate">DONATE</a>]
</center>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Block browser startup in template vms&#39;" href="71.rss" />
    <meta property="og:site_name" content="Kicksecure Forums" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forums.kicksecure.com/uploads/default/original/1X/a630bee107b3968e092ffc2c4429ddad46791578.png" />
<meta property="og:image" content="https://forums.kicksecure.com/uploads/default/original/1X/a630bee107b3968e092ffc2c4429ddad46791578.png" />
<meta property="og:url" content="https://forums.kicksecure.com/t/block-browser-startup-in-template-vms/71" />
<meta name="twitter:url" content="https://forums.kicksecure.com/t/block-browser-startup-in-template-vms/71" />
<meta property="og:title" content="Block browser startup in template vms" />
<meta name="twitter:title" content="Block browser startup in template vms" />
<meta property="og:description" content="Can this be done to firefox as well? Just firefox and chromium I have in mind.  Ideally I think this should be implemented upstream by qubes, but they don’t modify DomU applications, sometimes only add some patches to work with Qubes, but nothing to block an application.  The update proxy is a minimal mitigation that requires applications to be configured to use the proxy but it is very easy to circumvent that. It is the bare minimal to avoid using a browser on the template as stated in that p..." />
<meta name="twitter:description" content="Can this be done to firefox as well? Just firefox and chromium I have in mind.  Ideally I think this should be implemented upstream by qubes, but they don’t modify DomU applications, sometimes only add some patches to work with Qubes, but nothing to block an application.  The update proxy is a minimal mitigation that requires applications to be configured to use the proxy but it is very easy to circumvent that. It is the bare minimal to avoid using a browser on the template as stated in that p..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="3 ❤" />
<meta property="article:published_time" content="2022-07-08T14:14:32+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/1X/5667b439b037afb9b0a1e6472421025ff9ca03ed.jpg" alt="Kicksecure Forums" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="71.html">Block browser startup in template vms</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/development/7.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Kicksecure Forums'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/1X/5667b439b037afb9b0a1e6472421025ff9ca03ed.jpg'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.kicksecure.com/u/nyxnor'><span itemprop='name'>nyxnor</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="71.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-07-08T14:14:32Z' class='post-time'>
                July 8, 2022,  2:14pm
              </time>
              <meta itemprop='dateModified' content='2022-07-10T10:36:23Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="onebox githubblob" data-onebox-src="../../../external.html?link=https://github.com/Kicksecure/tb-starter/blob/329daee153a86798eec6380d010d1a23ac186cc8/usr/bin/torbrowser#L233">
  <header class="source">

      <a href="../../../external.html?link=https://github.com/Kicksecure/tb-starter/blob/329daee153a86798eec6380d010d1a23ac186cc8/usr/bin/torbrowser#L233" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <h4><a href="../../../external.html?link=https://github.com/Kicksecure/tb-starter/blob/329daee153a86798eec6380d010d1a23ac186cc8/usr/bin/torbrowser#L233" target="_blank" rel="noopener nofollow ugc">Kicksecure/tb-starter/blob/329daee153a86798eec6380d010d1a23ac186cc8/usr/bin/torbrowser#L233</a></h4>



    <pre class="onebox">      <code class="lang-">
        <ol class="start lines" start="223" style="counter-reset: li-counter 222 ;">
            <li>      true "Not running in TemplateVM."</li>
            <li>      return 0</li>
            <li>   fi</li>
            <li>
            <li>   if [ "$tb_allow_start_in_templatevm" = "true" ]; then</li>
            <li>      true "tb_allow_start_in_templatevm is true."</li>
            <li>      return 0</li>
            <li>   fi</li>
            <li>
            <li>   tb_qubes_wiki="in_qubes-whonix"</li>
            <li class="selected">   local MSG="&lt;p&gt;Do not run $tb_title in Template.&lt;br&gt;&lt;/br&gt;</li>
            <li>&lt;br&gt;&lt;/br&gt;</li>
            <li>More info: &lt;a href=https://www.whonix.org/wiki/$tb_wiki#$tb_qubes_wiki&gt;https://www.whonix.org/wiki/$tb_wiki#$tb_qubes_wiki&lt;/a&gt;&lt;/p&gt;"</li>
            <li>   $output ${output_opts[@]} --messagex --typex "error" --titlex "$TITLE" --message "$MSG" --done</li>
            <li>   $output ${output_opts[@]} --messagecli --typecli "error" --titlecli "$TITLE" --message "$MSG" --done</li>
            <li>
            <li>   exit 3</li>
            <li>}</li>
            <li>
            <li>tb_qubes_dvm_template() {</li>
            <li>   ## Avoid running in Qubes DVM Template.</li>
        </ol>
      </code>
    </pre>



  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>Can this be done to firefox as well? Just firefox and chromium I have in mind.</p>
<p>Ideally I think this should be implemented upstream by qubes, but they don’t modify DomU applications, sometimes only add some patches to work with Qubes, but nothing to block an application.</p>
<p>The <a href="../../../external.html?link=https://www.qubes-os.org/doc/how-to-install-software/#updates-proxy" rel="noopener nofollow ugc">update proxy</a> is a minimal mitigation that requires applications to be configured to use the proxy but it is very easy to circumvent that. It is the bare minimal to avoid using a browser on the template as stated in that page.</p>
<p>What I am thinking is that if this is done in Kicksecure then later moved to qubes package to templates, <code>qubes-template-browser-block</code>, they can remove the <em>update proxy</em> that does not guard much against anything besides the browser, the templates will be networked again, the template updates will be stream isolated.</p>
        </div>

        <meta itemprop='headline' content='Block browser startup in template vms'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Kicksecure Forums'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/1X/5667b439b037afb9b0a1e6472421025ff9ca03ed.jpg'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.kicksecure.com/u/nyxnor'><span itemprop='name'>nyxnor</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="71.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-07-08T14:19:53Z' class='post-time'>
                July 8, 2022,  2:19pm
              </time>
              <meta itemprop='dateModified' content='2022-07-08T14:19:53Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I mean, probably kicksecure is the wrong forum, this is an upstream issue. I just opened here because for torbrowser it is in the kicksecure repo, and with kicksecure being the base layer for whonix but without tor, then why not do it for firefox and chromium…</p>
        </div>

        <meta itemprop='headline' content='Block browser startup in template vms'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
            <meta itemprop='name' content='Kicksecure Forums'>
              <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/1X/5667b439b037afb9b0a1e6472421025ff9ca03ed.jpg'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
            <a itemprop="url" href='../../../external.html?link=https://forums.kicksecure.com/u/Patrick'><span itemprop='name'>Patrick</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="71.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-07-09T14:15:05Z' class='post-time'>
                July 9, 2022,  2:15pm
              </time>
              <meta itemprop='dateModified' content='2022-07-09T14:15:05Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Should be reported at and implemented in upstream, in Qubes.</p>
        </div>

        <meta itemprop='headline' content='Block browser startup in template vms'>

        <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.kicksecure.com/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://forums.kicksecure.com/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <center>
[<a href="../../../external.html?link=https://www.kicksecure.com/wiki/Imprint">Imprint</a>]
[<a href="../../../external.html?link=https://www.kicksecure.com/wiki/Privacy_Policy">Privacy Policy</a>]
[<a href="../../../external.html?link=https://www.kicksecure.com/wiki/Cookie_Policy">Cookie Policy</a>]
[<a href="../../../external.html?link=https://www.kicksecure.com/wiki/Terms_of_Use">Terms of Use</a>]
[<a href="../../../external.html?link=https://www.kicksecure.com/wiki/E-Sign_Consent">E-Sign Consent</a>]
[<a href="../../../external.html?link=https://www.kicksecure.com/wiki/DMCA">DMCA</a>]
[<a href="../../../external.html?link=https://www.kicksecure.com/wiki/Contributors">Contributors</a>]
[<a href="../../../external.html?link=https://www.kicksecure.com/wiki/Investors">Investors</a>]
[<a href="../../../external.html?link=https://www.kicksecure.com/wiki/Priority_Support">Priority Support</a>]
[<a href="../../../external.html?link=https://www.kicksecure.com/wiki/Professional_Support">Professional Support</a>]
</center>
    
  </body>
  
</html>
