<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Splitting security-misc into shared, desktop, and server packages - Development - Kicksecure Forums</title>
    <meta name="description" content="Read through the discussion at Split the `security-misc` into `security-misc-shared`, `security-misc-desktop` and `security-misc-server` · Issue #187 · Kicksecure/security-misc · GitHub, and created a table of (almost) a&amp;hellip;">
    <meta name="generator" content="Discourse 3.3.2 - https://github.com/discourse/discourse version 1da4243ccaa95f96022b83ce37b7895e763f897c">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/0db9935a1fdd7302cae516aaa752af0de307d388_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/cbdfe4b0c05c97069961301225ed1ccd6e766f67_2_180x180.png">
<meta name="theme-color" media="all" content="#ffffff">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="674.html" />

<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Kicksecure Forums Search">

    <link href="../../stylesheets/color_definitions_base__3_d24c08f68d8198c14c034c857affc3566d0b7d18.css_%3b%20filename_%3dUTF-8%27%27color_definitions_base__3_d24c08f68d8198c14c034c857affc3566d0b7d186?__ws=forums.kicksecure.com" media="all" rel="stylesheet" class="light-scheme"/>

  <link href="../../stylesheets/desktop_7da606fe7bf19946b45c48039ec67ec79bab785d.css_%3b%20filename_%3dUTF-8%27%27desktop_7da606fe7bf19946b45c48039ec67ec79bab785d61cf.css?__ws=forums.kicksecure.com" media="all" rel="stylesheet" data-target="desktop"  />



  <link href="../../stylesheets/checklist_7da606fe7bf19946b45c48039ec67ec79bab785d.css_%3b%20filename_%3dUTF-8%27%27checklist_7da606fe7bf19946b45c48039ec67ec79bab785d61cf.css?__ws=forums.kicksecure.com" media="all" rel="stylesheet" data-target="checklist"  />
  <link href="../../stylesheets/discourse-details_7da606fe7bf19946b45c48039ec67ec79bab785d.css_%3b%20filename_%3dUTF-8%27%27discourse-details_7da606fe7bf19946b45c48039ec67ec79bab785d61cf.css?__ws=forums.kicksecure.com" media="all" rel="stylesheet" data-target="discourse-details"  />
  <link href="../../stylesheets/discourse-lazy-videos_7da606fe7bf19946b45c48039ec67ec79bab785d.css_%3b%20filename_%3dUTF-8%27%27discourse-lazy-videos_7da606fe7bf19946b45c48039ec67ec79bab785d61cf.css?__ws=forums.kicksecure.com" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
  <link href="../../stylesheets/discourse-local-dates_7da606fe7bf19946b45c48039ec67ec79bab785d.css_%3b%20filename_%3dUTF-8%27%27discourse-local-dates_7da606fe7bf19946b45c48039ec67ec79bab785d61cf.css?__ws=forums.kicksecure.com" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
  <link href="../../stylesheets/discourse-narrative-bot_7da606fe7bf19946b45c48039ec67ec79bab785d.css_%3b%20filename_%3dUTF-8%27%27discourse-narrative-bot_7da606fe7bf19946b45c48039ec67ec79bab785d61cf?__ws=forums.kicksecure.com" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
  <link href="../../stylesheets/discourse-presence_7da606fe7bf19946b45c48039ec67ec79bab785d.css_%3b%20filename_%3dUTF-8%27%27discourse-presence_7da606fe7bf19946b45c48039ec67ec79bab785d61cf.css?__ws=forums.kicksecure.com" media="all" rel="stylesheet" data-target="discourse-presence"  />
  <link href="../../stylesheets/docker_manager_7da606fe7bf19946b45c48039ec67ec79bab785d.css_%3b%20filename_%3dUTF-8%27%27docker_manager_7da606fe7bf19946b45c48039ec67ec79bab785d61cf.css?__ws=forums.kicksecure.com" media="all" rel="stylesheet" data-target="docker_manager"  />
  <link href="../../stylesheets/poll_7da606fe7bf19946b45c48039ec67ec79bab785d.css_%3b%20filename_%3dUTF-8%27%27poll_7da606fe7bf19946b45c48039ec67ec79bab785d61cf.css?__ws=forums.kicksecure.com" media="all" rel="stylesheet" data-target="poll"  />
  <link href="../../stylesheets/poll_desktop_7da606fe7bf19946b45c48039ec67ec79bab785d.css_%3b%20filename_%3dUTF-8%27%27poll_desktop_7da606fe7bf19946b45c48039ec67ec79bab785d61cf.css?__ws=forums.kicksecure.com" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="../../stylesheets/desktop_theme_3_8511c4b38b012f2a61e3e2ab71c50fe8b1091b70.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_3_8511c4b38b012f2a61e3e2ab71c50fe8b1091b7061cf.css?__ws=forums.kicksecure.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="3" data-theme-name="graceful"/>
<link href="../../stylesheets/desktop_theme_2_c96d32376ee71266b45e85a3eb642846e8a352d9.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_2_c96d32376ee71266b45e85a3eb642846e8a352d961cf.css?__ws=forums.kicksecure.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2" data-theme-name="header"/>

    <!--
START custom CSS / JS

Configured here:
https://forums.kicksecure.com/admin/customize/themes/2/common/head_tag/edit
-->

<!-- START End of Year Banner -->


<!-- Not needed currently because banner inactive
<link rel="stylesheet" href="/mw-autogen/src-copy/CodeSelect.css">
<link rel="stylesheet" href="/mw-autogen/src-copy/PayViaPaypal.css">
<link rel="stylesheet" href="/mw-autogen/src-copy/Sitenotice_EndOfYear.css">
-->

<!-- Not needed currently because banner inactive
<script type="text/javascript" defer src="/mw-autogen/src-copy/CodeSelect.js"></script>
<script type="text/javascript" defer src="/mw-autogen/src-copy/PayViaPaypal.js"></script>
<script type="text/javascript" defer src="/mw-autogen/src-copy/Sitenotice_EndOfYear.js"></script>
-->

<style type="text/css">
  #donate-end-of-year div,
  #donate-end-of-year span,
  #donate-end-of-year a {
    box-sizing: border-box;
  }
  
  #end-of-year-banner-wrapper {
      margin: 0 10px 25px;
  }

  #donate-end-of-year i {
    width: 20px;
    height: 20px;
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;
    filter: brightness(2);
    display: inline-block;
  }

  #donate-end-of-year i.dismiss {
    background-image: url('../../w/images/0/0b/End-of-year-times.png');
  }

  #donate-end-of-year .slideshow > .content img {
    float: left;
    margin-right: 20px;
  }

  #donate-end-of-year .slideshow .flow i {
    cursor: pointer;
    filter: brightness(1);
    height: 17px;
    width: 17px;
    vertical-align: middle;
  }

  #donate-end-of-year .slideshow .flow i.is-play {
    background-image: url('../../w/images/3/32/End-of-year-pause.png');
  }

  #donate-end-of-year .slideshow .flow i.is-pause {
    background-image: url('../../w/images/c/c8/End-of-year-play.png');
  }

</style>



<!-- END End of Year Banner -->

<!--
END custom CSS / JS
-->

    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;Splitting security-misc into shared, desktop, and server packages&#39;" href="674.rss" />
    <meta property="og:site_name" content="Kicksecure Forums" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forums.kicksecure.com/uploads/default/original/1X/cbdfe4b0c05c97069961301225ed1ccd6e766f67.png" />
<meta property="og:image" content="https://forums.kicksecure.com/uploads/default/original/1X/cbdfe4b0c05c97069961301225ed1ccd6e766f67.png" />
<meta property="og:url" content="https://forums.kicksecure.com/t/splitting-security-misc-into-shared-desktop-and-server-packages/674" />
<meta name="twitter:url" content="https://forums.kicksecure.com/t/splitting-security-misc-into-shared-desktop-and-server-packages/674" />
<meta property="og:title" content="Splitting security-misc into shared, desktop, and server packages" />
<meta name="twitter:title" content="Splitting security-misc into shared, desktop, and server packages" />
<meta property="og:description" content="Read through the discussion at Split the `security-misc` into `security-misc-shared`, `security-misc-desktop` and `security-misc-server` · Issue #187 · Kicksecure/security-misc · GitHub, and created a table of (almost) all of the files and directories in security-misc, along with what subpackage they should go into. The vast majority of the package looks like it can remain shared. Some bugs were also potentially uncovered while reviewing this.  The full table is very large and has very long line..." />
<meta name="twitter:description" content="Read through the discussion at Split the `security-misc` into `security-misc-shared`, `security-misc-desktop` and `security-misc-server` · Issue #187 · Kicksecure/security-misc · GitHub, and created a table of (almost) all of the files and directories in security-misc, along with what subpackage they should go into. The vast majority of the package looks like it can remain shared. Some bugs were also potentially uncovered while reviewing this.  The full table is very large and has very long line..." />
<meta property="og:article:section" content="Development" />
<meta property="og:article:section:color" content="25AAE2" />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="2 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="3 ❤" />
<meta property="article:published_time" content="2024-11-11T06:11:26+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler ">
    <div class="background-container"></div>
<div class="header-brand-nav">
    <a class="home" href="../../../external.html?link=https://www.kicksecure.com/">Kicksecure Wiki</a>
    <a href="../../../external.html?link=https://www.kicksecure.com/wiki/Download">Download</a>
    <a href="../../../external.html?link=https://www.kicksecure.com/wiki/Documentation">Docs</a>
    <a href="../../c/news/5.html">News</a>
    <a href="../../../external.html?link=https://www.kicksecure.com/wiki/Support">Support</a>
    <a href="../../../external.html?link=https://www.kicksecure.com/wiki/Forum_Best_Practices">Tips</a>
    <a href="../../../external.html?link=https://www.kicksecure.com/wiki/Reporting_Bugs#Issue_Tracker">Issues</a>
    <a href="../../../external.html?link=https://www.kicksecure.com/wiki/Contribute">Contribute</a>
    <a href="../../../external.html?link=https://www.kicksecure.com/wiki/Donate">DONATE</a>
</div>
    <header>
  <a href="../../index.html">
    Kicksecure Forums
  </a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="674.html">Splitting security-misc into shared, desktop, and server packages</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/development/7.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  

    <div itemscope itemtype='../../../external.html?link=http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='Splitting security-misc into shared, desktop, and server packages'>
      <link itemprop='url' href='674.html'>
      <meta itemprop='datePublished' content='2024-11-11T06:11:26Z'>
        <meta itemprop='articleSection' content='Development'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
        <meta itemprop='name' content='Kicksecure Forums'>
          <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
            <meta itemprop='url' content='../../uploads/default/original/1X/b25d14d50e56313c399bc031caf564b64756e72b.png'>
          </div>
      </div>


          <div id='post_1'  class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
                <a itemprop="url" href='../../../external.html?link=https://forums.kicksecure.com/u/arraybolt3'><span itemprop='name'>arraybolt3</span></a>
                
              </span>

                <link itemprop="mainEntityOfPage" href="674.html">


              <span class="crawler-post-infos">
                  <time  datetime='2024-11-11T06:11:26Z' class='post-time'>
                    November 11, 2024,  6:11am
                  </time>
                  <meta itemprop='dateModified' content='2024-11-11T06:11:26Z'>
              <span itemprop='position'>1</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Read through the discussion at <a href="../../../external.html?link=https://github.com/Kicksecure/security-misc/issues/187" class="inline-onebox" rel="noopener nofollow ugc">Split the `security-misc` into `security-misc-shared`, `security-misc-desktop` and `security-misc-server` · Issue #187 · Kicksecure/security-misc · GitHub</a>, and created a table of (almost) all of the files and directories in security-misc, along with what subpackage they should go into. The vast majority of the package looks like it can remain shared. Some bugs were also potentially uncovered while reviewing this.</p>
<p>The full table is very large and has very long lines, so rather than pasting it here, I put it in a GitHub gist here: <a href="../../../external.html?link=https://gist.github.com/ArrayBolt3/1fef29b2214f27054cd85785530e7f7f" class="inline-onebox" rel="noopener nofollow ugc">Suggested way to split the security-misc package into shared, desktop, and server packages. · GitHub</a></p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="1" />
              <span class='post-likes'>1 Like</span>
            </div>

          </div>
          <div id='post_2' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
                <a itemprop="url" href='../../../external.html?link=https://forums.kicksecure.com/u/Patrick'><span itemprop='name'>Patrick</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2024-11-11T14:20:43Z' class='post-time'>
                    November 11, 2024,  2:20pm
                  </time>
                  <meta itemprop='dateModified' content='2024-11-11T14:20:43Z'>
              <span itemprop='position'>2</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>I’d like to address the bugs found first, as that seems easy and to simplify this discussion.</p>
<blockquote>
<ul>
<li>[!] │   │   ├── pkexec.security-misc                                                              (shared)  (useful on desktop and server, however lxqt-sudo won’t be present on a server, but pkexec may be used on a server. Resolve by allowing the use of sudo.)</li>
</ul>
</blockquote>
<p>Fixed by deleting this legacy leftover file.</p>
<blockquote>
<ul>
<li>[!] │   │       ├── disable-kernel-module-loading                                                 (shared)  (useful on desktop and server, BUT SOMEHOW ISN’T SET EXECUTABLE???)</li>
</ul>
</blockquote>
<p>Fixed.</p>
<pre><code class="lang-auto">* [!] │   ├── dkms                                                                                  (none)    (see files below)
* [!] │   │   └── framework.conf.d                                                                  (none)    (see files below)
* [!] │   │       └── 30_security-misc.conf                                                         (none)    (should be moved out of security-isc)
</code></pre>
<blockquote>
<ul>
<li>[!] │   │       │   ├── panic-on-oops.service                                                     (shared)  (useful on desktop and server, systemd config looks invalid with a conflict between WantedBy and After)</li>
</ul>
</blockquote>
<p>Fixed.</p>
<blockquote>
<p><code>* [x] │   │       ├── install matroxfb_bases /usr/bin/disabled-framebuffer-by-security-misc         (shared)  (ancient, obsolete, TYPO'D - THIS SHOULD BE BASE, NOT BASES)</code></p>
</blockquote>
<p>Fixed.</p>
<hr>
<p>All bugs should have been addressed.</p>
<hr>
<p>Server? Could also be a home server with a GUI?</p>
<hr>
<blockquote>
<ul>
<li><span class="chcklst-box checked fa fa-check-square-o fa-fw"></span> │   │   ├── <code>glib-compile-schemas /usr/share/glib-2.0/schemas || true</code>                        (desktop) (glib-compile-schemas is of no use on a server)</li>
</ul>
</blockquote>
<p>No use but also no harm? So just keep as is for simplicity? Also a remote server might have a GUI.</p>
<blockquote>
<ul>
<li><span class="chcklst-box checked fa fa-check-square-o fa-fw"></span> │   ├── security-misc.gconf-defaults                                                          (desktop) (nautilus won’t be present on a server)</li>
</ul>
</blockquote>
<p>Similar as above. Doesn’t harm and useful if a GUI is used on the server.</p>
<blockquote>
<p><code>* [x] │   ├── bluetooth                                                                             (desktop) (all subfiles are desktop)</code><br>
<code>* [x] │   │   └── 30_security-misc.conf                                                             (desktop) (bluez should only be present on desktops)</code></p>
</blockquote>
<p>But if on a server, this config does not harm, even useful?</p>
<blockquote>
<p><code>* [x] │   │   ├── 25_default_whitelist_hardened_malloc.conf                                         (server)  (desktops don't use hardened-malloc)</code></p>
</blockquote>
<p>We actually did but <a href="../../../external.html?link=https://www.kicksecure.com/wiki/Hardened_Malloc" class="inline-onebox">Hardened Malloc</a> is nowadays deprecated in Kicksecure.</p>
<blockquote>
<p><code>* [x] │   │   ├── 25_default_whitelist_postfix.conf                                                 (server)  (desktops shouldn't run postfix)</code></p>
</blockquote>
<p>The primary defense for desktops would be not installing postfix then? But then postfix might be installed thorugh a <code>Depends:</code>, or <code>Recommends:</code>. In that case, indeed, best if not whitelisted.</p>
<blockquote>
<p><code>* [x] │   │   ├── 25_default_whitelist_spice.conf                                                   (desktop) (only desktops need USB passthrough with SPICE)</code></p>
</blockquote>
<p>SPICE over network to server?</p>
<hr>
<p>I guess I would tend to keep as much shared as possible. The more remains shared, the less migration work there will be.</p>
<p>The file per file analysis is a great approach!</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
          <div id='post_3' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
                <a itemprop="url" href='../../../external.html?link=https://forums.kicksecure.com/u/arraybolt3'><span itemprop='name'>arraybolt3</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2024-11-14T03:29:03Z' class='post-time'>
                    November 14, 2024,  3:29am
                  </time>
                  <meta itemprop='dateModified' content='2024-11-14T03:29:03Z'>
              <span itemprop='position'>3</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <aside class="quote no-group quote-modified" data-username="Patrick" data-post="2" data-topic="674">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="../../letter_avatar_proxy/v4/letter/p/b2d939/48.png" class="avatar"> Patrick:</div>
<blockquote>
<blockquote>
<ul>
<li>[!] │ │ │ ├── panic-on-oops.service (shared) (useful on desktop and server, systemd config looks invalid with a conflict between WantedBy and After)</li>
</ul>
</blockquote>
<p>Fixed.</p>
</blockquote>
</aside>
<p>It turns out I was wrong here - the config <em>looked</em> invalid but actually was not. I had mistakenly thought that <code>WantedBy</code> required the wanted service to start before the wanting service. This was false, the <code>systemd.unit</code> manpage states:</p>
<blockquote>
<p>Note that requirement dependencies do not influence the order in which services are started or stopped. This has to be configured independently with the <code>After=</code> or <code>Before=</code> options. If unit <code>foo.service</code> pulls in unit <code>bar.service</code> as configured with <code>Wants=</code> and no ordering is configured with <code>After=</code> or <code>Before=</code> , then both units will be started simultaneously and without any delay between them if <code>foo.service</code> is activated.</p>
</blockquote>
<p>So having a unit be both <code>WantedBy=multi-user.target</code> and <code>After=multi-user.target</code> is actually valid. Furthermore, removing the <code>After=multi-user.target</code> line has resulted in an error message on boot:</p>
<pre><code>[ SKIP ] Ordering cycle found, skipping panic-on-oops.service
</code></pre>
<p>Adding back <code>After=multi-user.target</code> to <code>/usr/lib/systemd/system/panic-on-oops.service</code> resolves the issue.</p>
<p>Sorry about the mix-up here.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="1" />
              <span class='post-likes'>1 Like</span>
            </div>

          </div>
          <div id='post_4' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
                <a itemprop="url" href='../../../external.html?link=https://forums.kicksecure.com/u/Patrick'><span itemprop='name'>Patrick</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2024-11-14T20:45:58Z' class='post-time'>
                    November 14, 2024,  8:45pm
                  </time>
                  <meta itemprop='dateModified' content='2024-11-14T20:45:58Z'>
              <span itemprop='position'>4</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>No worries.</p>
<p>Fixed by git revert.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
          <div id='post_5' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
                <a itemprop="url" href='../../../external.html?link=https://forums.kicksecure.com/u/arraybolt3'><span itemprop='name'>arraybolt3</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2024-11-20T01:14:04Z' class='post-time'>
                    November 20, 2024,  1:14am
                  </time>
                  <meta itemprop='dateModified' content='2024-11-20T01:14:04Z'>
              <span itemprop='position'>5</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Hmm, I see a lot of your points here. I think the only one I disagree with is the SPICE whitelist point - the <code>spice-client-glib-usb-acl-helper</code> being granted an exception from permission-hardener here is apparently only used when a host is passing through USB devices to a guest. (See <a href="../../../external.html?link=https://packages.debian.org/sid/misc/spice-client-glib-usb-acl-helper" class="inline-onebox" rel="noopener nofollow ugc">Debian -- Details of package spice-client-glib-usb-acl-helper in sid</a>) I don’t foresee this happening frequently (if ever) on a server. In theory, an attacker could use USB passthrough to compromise a confidential VM should they gain access to the host (use USB-over-IP to connect a malicious USB device to a compromised server remotely, then pass it through to the target VM and exploit a driver within the VM to gain a foothold there). Finally. the binary is setuid. Obscure-but-insecure things are where a lot of vulnerabilities are found, like the recent CUPS RCE.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="1" />
              <span class='post-likes'>1 Like</span>
            </div>

          </div>
          <div id='post_6' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
                <a itemprop="url" href='../../../external.html?link=https://forums.kicksecure.com/u/Patrick'><span itemprop='name'>Patrick</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2024-11-20T13:49:12Z' class='post-time'>
                    November 20, 2024,  1:49pm
                  </time>
                  <meta itemprop='dateModified' content='2024-11-20T13:49:12Z'>
              <span itemprop='position'>6</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>I no longer know how important that exception for <code>spice-client-glib-usb-acl-helper</code> is at all. Cannot find how it ended up getting added.</p>
<p><code>spice-client-glib-usb-acl-helper</code> isn’t installed by default in Kicksecure (or Whonix). Not even inside VMs.</p>
<p>Therefore, someone who installs it, will actually need it.</p>
<p>The issue is also that the threat model of permission hardener isn’t well enough defined.</p>
<p><code>spice-client-glib-usb-acl-helper</code> isn’t installed by default and doesn’t install itself using <code>apt install spice-client-glib-usb-acl-helper</code> by accident either. If malware was able to run <code>apt install spice-client-glib-usb-acl-helper</code>, then there would already be a root compromise and permission hardener couldn’t help anymore either.</p>
<p>From that perspective, that exception can stay shared for simplicity?</p>
<aside class="quote no-group" data-username="arraybolt3" data-post="5" data-topic="674">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="../../user_avatar/forums.kicksecure.com/arraybolt3/48/88_2.png" class="avatar"> arraybolt3:</div>
<blockquote>
<p>Finally. the binary is setuid. Obscure-but-insecure things are where a lot of vulnerabilities are found, like the recent CUPS RCE.</p>
</blockquote>
</aside>
<p>Right.</p>
<p>That’s why permission hardener disables many historically used SUIDs that are nowadays no longer popular (at least not by Kicksecure (or Whonix) users).</p>
<p>Some examples include:</p>
<ul>
<li>write SUID, wall SUID</li>
<li>passwd SUID (using it with sudo instead, multi-users desktops are not popular where this is required)</li>
<li>su (using sudo instead, maybe <a href="../../../external.html?link=https://forums.whonix.org/t/replace-sudo-with-doas/17482" class="inline-onebox">Replace sudo with doas - Development - Whonix Forum</a>)</li>
</ul>
<p>These are well suitable for permission hardener, since these are installed by default and hard (infeasible? / impossible?) to not have installed by default.</p>
<p>This is the main motivation for permission hardener. To disable SUIDs where it’s not strictly required for most users, yet having these binaries around is “mandatory”.</p>
<p>However, for packages such as <code>spice-client-glib-usb-acl-helper</code> maybe, the SUID functionality might be specifically wanted by the user?</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
    </div>


    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='../../index.html' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='../../categories.html' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='../../guidelines.html' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://www.kicksecure.com/wiki/Terms_of_Service' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../../external.html?link=https://www.kicksecure.com/wiki/Privacy_Policy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    <div class="footer-brand-nav">
    <div class="legal">
        By using this website, you acknowledge you have read, understood, and agree to be bound by these these agreements:
        <a href="../../../external.html?link=https://www.kicksecure.com/wiki/Terms_of_Service" title="Terms of Service">Terms of Service</a>, and
        <a href="../../../external.html?link=https://www.kicksecure.com/wiki/Privacy_Policy" title="Privacy Policy">Privacy Policy</a>,
        <a href="../../../external.html?link=https://www.kicksecure.com/wiki/Cookie_Policy" title="Cookie Policy">Cookie Policy</a>,
        <a href="../../../external.html?link=https://www.kicksecure.com/wiki/E-Sign_Consent" title="E-Sign Consent">E-Sign Consent</a>
        <a href="../../../external.html?link=https://www.kicksecure.com/wiki/DMCA">DMCA</a>
        <a href="../../../external.html?link=https://www.kicksecure.com/wiki/Imprint">Imprint</a>
    </div>
</div>

    <noscript>
    <div class="footer-brand-nav">
        <div class="legal">
            By using this website, you acknowledge you have read, understood, and agree to be bound by these these agreements:
            <a href="../../../external.html?link=https://www.kicksecure.com/wiki/Terms_of_Service" title="Terms of Service">Terms of Service</a>, and
            <a href="../../../external.html?link=https://www.kicksecure.com/wiki/Privacy_Policy" title="Privacy Policy">Privacy Policy</a>,
            <a href="../../../external.html?link=https://www.kicksecure.com/wiki/Cookie_Policy" title="Cookie Policy">Cookie Policy</a>,
            <a href="../../../external.html?link=https://www.kicksecure.com/wiki/E-Sign_Consent" title="E-Sign Consent">E-Sign Consent</a>
            <a href="../../../external.html?link=https://www.kicksecure.com/wiki/DMCA">DMCA</a>
            <a href="../../../external.html?link=https://www.kicksecure.com/wiki/Imprint">Imprint</a>
        </div>
    </div>

    <style type="text/css">
        /* Here is room for styles for when Javascript is deactivated */
    </style>
</noscript>
  </body>
  
</html>
